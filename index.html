<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Image Generator by Xracing Studio</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: Arial, sans-serif;
        }
        #image-container {
            margin-top: 20px;
            max-width: 80%;
            max-height: 80%;
        }
        img {
            max-width: 100%;
            max-height: 100%;
        }
    </style>
</head>
<body>

<h1>AI Image Generator by Xracing Studio</h1>
<h2>Stable Diffusion XL</h2>
<input type="text" id="prompt" placeholder="Enter your prompt here" style="width: 300px;">
<button onclick="generateImage()">Generate Image</button>
<div id="image-container"></div>
<p id="save-instructions" style="display: none;">To save the image, capture the screen yourself.</p>

<script>
    async function generateImage() {
        const prompt = document.getElementById('prompt').value;
        const apiKey = 'key-3DAubhmdAfGlAic8jTsG5z3OuNfK7Sty4b9UyKxt381NACawZ9dnuCejRnIXcEP0KxHO13bq67g4oEJbfBTDsCYJEmf2qNlD'; // Replace with your actual API key

        const options = {
            method: 'POST',
            headers: {
                accept: 'application/json',
                'content-type': 'application/json',
                authorization: `Bearer ${apiKey}`
            },
            body: JSON.stringify({
                model: 'stable-diffusion-xl-v1-0',
                prompt: prompt,
                negative_prompt: 'NSFW, naked, nude, porn, explicit, sexual, ugly, old, fat, slight, disgusting, obscene, violence, gore, disturbing, racist, discriminatory, disfigured, distorted, poorly lit, blurry, grainy, overexposed, underexposed',
                prompt_2: prompt,
                negative_prompt_2: 'NSFW, naked, nude, porn, explicit, sexual, ugly, old, fat, slight, disgusting, obscene, violence, gore, disturbing, racist, discriminatory, disfigured, distorted, poorly lit, blurry, grainy, overexposed, underexposed',
                width: 512,
                height: 512,
                steps: 25,
                guidance: 7.5,
                seed: 0,
                scheduler: 'euler',
                output_format: 'jpeg'
            })
        };

        try {
            console.log('Sending request with options:', options);
            const response = await fetch('https://api.getimg.ai/v1/stable-diffusion-xl/text-to-image', options);
            console.log('Response:', response);

            if (!response.ok) {
                throw new Error('Network response was not ok ' + response.statusText);
            }

            const data = await response.json();
            console.log('Response data:', data);

            const base64Image = data.image; // Adjust this according to the actual response format
            console.log('Base64 Image:', base64Image);
            const imageElement = document.getElementById('image-container').innerHTML = `<img id="generated-image" src="data:image/jpeg;base64,${base64Image}" alt="Generated Image">`;
            document.getElementById('save-instructions').style.display = 'block';
        } catch (error) {
            console.error('Error generating image:', error);
            alert('Failed to generate image. Please try again.');
        }
    }
</script>

</body>
</html>